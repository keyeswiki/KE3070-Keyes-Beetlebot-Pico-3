# 项目14: 红外遥控和接收

## 1.实验简介：
红外遥控在日常生活中随处可见，它被用来控制各种家电，如电视、音响、录影机和卫星信号接收器。红外遥控是由红外发射和红外接收系统组成的，也就是一个红外遥控器、红外接收器和一个能解码的单片机组成的，小车上有个红外接收器。

在本实验中，使用红外接收器和红外遥控器相结合，读取红外遥控器上的按键值并将按键值打印在串口监视器上。

## 2.元件知识：
**红外(IR)遥控器：** 是一种具有一定数量按钮的设备。按下不同的按钮会使位于遥控器前端的红外发射管以不同的编码发送红外信号。红外遥控技术应用广泛，如电视、空调等。因此，在当今科技发达社会，红外遥控技术使你切换电视节目和调节空调温度都很方便。
我们使用的遥控器如下所示：
该红外遥控器采用NEC编码，信号周期为110ms。
![Img](../../media/项目14-1img-20230330135918.png)

**红外(IR)接收器：** 它是一种元件，可以接收红外光，所以可以用它来检测红外遥控器发出的红外光信号。红外接收器解调接收到的红外光信号，并将其转换回二进制，然后将信息传递给微控制器。
红外信号调制过程图：
![Img](../../media/项目14-2img-20230531155411.png)

## 3.实验代码：
小车PCB板上的红外接收器是由Raspberry Pi Pico主板的GPIO6控制。

本教程中使用的代码保存在：“**..\Keyes Beetlebot Pico 3合1 智能小车\4. Python 教程\3. 项目教程**” 的路径中。你可以把代码移到任何地方。例如，我们将代码保存在**D盘**中，<span style="color: rgb(0, 209, 0);">路径为D:\3. 项目教程</span>。
![Img](../../media/电脑D盘路径img-20230601164744.png)

打开“**Thonny**”软件，点击“**此电脑**”→“**D:**”→“**3. 项目教程**”→“**项目14 红外遥控和接收**”，<span style="color: rgb(255, 76, 65);">选择“irrecvdata\.py”，右击鼠标选择“上传到/”，等待“irrecvdata\.py”被上传到ESP32主板</span>，然后鼠标左键双击“**Project_14_Infrared_Remote_And_Receiver.py**”。
![Img](../../media/项目14-3img-20230602111030.png)
![Img](../../media/项目14-4img-20230602111058.png)

```
from irrecvdata import irGetCMD #导入红外解码器。

recvPin = irGetCMD(6) #将红外解码器与引脚(6)相关联。

#得到红外键值后，在“Shell”中重复打印。
try:
    while True:
        irValue = recvPin.ir_read() #调用ir_read()读取按下的键的值并将其赋值给IRValue。
        if irValue:
           print(irValue) # 发送红外线接收器的irValue并打印结果。
except:
    pass

```
## 5.实验现象：
确保Raspberry Pi Pico主板已经连接到电脑上，单击“![Img](../../media/停止或重启后端进程img-20230511100302.png)”。
![Img](../../media/项目14-5img-20230602111233.png)

安上电池，将小车底板上的电源拨码开关拨到ON一端，开启电源。单击“![Img](../../media/运行img-20230511100130.png)”，代码开始执行，你会看到的现象是：将红外遥控器发射器对准红外接收头，按下红外控制器上的按键，Thonny IDE下的”Shell”窗口将打印当前接收到的按键编码值。按“Ctrl+C”或单击“![Img](../../media/停止或重启后端进程img-20230511100302.png)”退出程序。
![Img](../../media/项目14-6img-20230602111353.png)
![Img](../../media/项目15-1img-20230518082547.png)
![Img](../../media/项目14-7img-20230403143029.png)

写下红外遥控器与每个按钮相关联的代码，因为你稍后将需要这些信息。
![Img](../../media/项目14-8img-20230413082028.png)



